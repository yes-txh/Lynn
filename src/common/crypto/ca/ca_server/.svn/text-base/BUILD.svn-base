# BUILD script, generated by make2build
proto_library(
    name = "ca_storage",
    srcs = [
        "ca_storage.proto"
    ],
    deps = [
       "//common/rpc/proto_rpc:proto_rpc"
    ]
)


cc_library(
    name = "ca_server_lib",
    srcs = [
        "dir_manage.cc",
        "ca.cc",
        "role_manager.cc",
        "quota_manager.cc",
        "my_ca_simple_http.cc",
        "authenticate_record_manager.cc"
    ],
    deps = [
    "#pthread",
    "//common/crypto/ca/ca_public:ca_proto",
    "//common/crypto/ca/ca_server:ca_storage",
    "//common/crypto/rsa2:rsa2",
    "//common/baselib/svrpublib:svrpublib",
    "//common/file:recordio",
    "//common/base/string:string",
    "//thirdparty/glog:glog",
    "//thirdparty/gflags:gflags"
    ]
)

cc_binary(
    name = "ca_server",
    srcs = [
        "main.cc",
    ],
    deps = [
        "#pthread",
        ":ca_server_lib",
        "//common/crypto/rsa2:rsa2",
        "//common/baselib/svrpublib:svrpublib",
        "//thirdparty/glog:glog",
        "//thirdparty/gflags:gflags",
        "//common/system/io:io"
    ]
)

cc_test(
    name = "ca_test",
    srcs = [
        "ca_test.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)

cc_binary(
    name = "convert_records",
    srcs = [
        "convert_records.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)

cc_binary(
    name = "convert_bin2pb",
    srcs = [
        "convert_bin2pb.cc"
    ],
    deps = [
    ":ca_server_lib",
    ]
)

cc_binary(
    name = "ca_storage_tools",
    srcs = [
        "ca_storage_tools.cc"
    ],
    deps = [
    ":ca_server_lib",
    "//common/base:module",
    "//thirdparty/gtest:gtest"
    ],
	link_all_symbols = 1
)

cc_binary(
    name = "ca_server_onebox_test",
    srcs = [
        "ca_server_onebox_test.cc",
    ],
    deps = [
    ":ca_server_lib",
    ]
)

cc_test(
    name = "dir_manage_test",
    srcs = [
        "dir_manage_test.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)

cc_test(
    name = "role_manager_test",
    srcs = [
        "role_manager_test.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)

cc_test(
    name = "quota_manager_test",
    srcs = [
        "quota_manager_test.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)

cc_test(
    name = "authenticate_record_manager_test",
    srcs = [
        "authenticate_record_manager_test.cc",
    ],
    deps = [
    ":ca_server_lib"
    ]
)
